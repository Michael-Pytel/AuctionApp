<div class="listings-grid">
    {% for listing in listings %}
    <article class="listing-card">
        <a href="{% url 'listing_page' listing.id %}" class="listing-link">
            <!-- Image Section -->
            <div class="listing-image">
                {% if listing.image_url %}
                <img src="{{ listing.image_url }}" alt="{{ listing.title }}" loading="lazy">
                {% else %}
                <img src="https://assets.fishersci.com/TFS-Assets/CCG/product-images/default.jpg-650.jpg" 
                     alt="Default product image" loading="lazy">
                {% endif %}
                
                <!-- Price Badge -->
                {% if listing.max_bid %}
                <span class="price-badge bid-price">${{ listing.max_bid }}</span>
                {% else %}
                <span class="price-badge start-price">${{ listing.starting_price }}</span>
                {% endif %}
            </div>

            <!-- Content Section -->
            <div class="listing-content">
                <div class="listing-header">
                    <h3>{{ listing.title }}</h3>
                    <p class="listing-owner">Listed by: {{ listing.owner }}</p>
                </div>

                <p class="listing-description">{{ listing.description|truncatechars:100 }}</p>

                <!-- Footer Section -->
                <div class="listing-footer">
                    {% if listing.category %}
                    <span class="category-tag">{{ listing.category }}</span>
                    {% endif %}
                    <span class="time-ago">{{ listing.updated|timesince }} ago</span>
                </div>
            </div>
        </a>
    </article>
    {% endfor %}
</div>